

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Services - Ontimize Web</title>







<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Ontimize Web">
<meta property="og:title" content="Services">


  <link rel="canonical" href="https://ontimizeweb.github.io/docs/guide/service/">
  <meta property="og:url" content="https://ontimizeweb.github.io/docs/guide/service/">



  <meta property="og:description" content="     On This Page  ">



  <meta name="twitter:site" content="@imatiainnova">
  <meta name="twitter:title" content="Services">
  <meta name="twitter:description" content="     On This Page  ">
  <meta name="twitter:url" content="https://ontimizeweb.github.io/guide/service/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://ontimizeweb.github.io/docs/images/site-logo.png">
    
  

  



  

  



  <meta property="og:image" content="https://ontimizeweb.github.io/docs/images/site-logo.png">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2021-02-26T06:58:38-05:00">






  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://ontimizeweb.github.io/docs",
      "logo": "https://ontimizeweb.github.io/docs/images/site-logo.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Ontimize Web",
      "url" : "https://ontimizeweb.github.io/docs",
      "sameAs" : ["https://twitter.com/imatiainnova"]
    }
  </script>






<!-- end SEO -->


<link href="https://ontimizeweb.github.io/docs/feed.xml" type="application/atom+xml" rel="alternate" title="Ontimize Web Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script defer src="https://ontimizeweb.github.io/docs/assets/js/fontawesome-all.min.js"></script>

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://ontimizeweb.github.io/docs/assets/css/main.css">
<link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="https://ontimizeweb.github.io/docs/images/apple-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="https://ontimizeweb.github.io/docs/images/apple-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="https://ontimizeweb.github.io/docs/images/apple-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="https://ontimizeweb.github.io/docs/images/apple-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="https://ontimizeweb.github.io/docs/images/apple-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="https://ontimizeweb.github.io/docs/images/apple-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="https://ontimizeweb.github.io/docs/images/apple-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="https://ontimizeweb.github.io/docs/images/apple-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="https://ontimizeweb.github.io/docs/images/apple-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="https://ontimizeweb.github.io/docs/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="https://ontimizeweb.github.io/docs/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="https://ontimizeweb.github.io/docs/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="icon" type="image/png" href="https://ontimizeweb.github.io/docs/images/android-icon-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="manifest" href="https://ontimizeweb.github.io/docs/images/manifest.json?v=M44lzPylqQ">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="https://ontimizeweb.github.io/docs/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="https://ontimizeweb.github.io/docs/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
          <a href="https://ontimizeweb.github.io/docs/">
            <div class="main_icon"></div>
        </a>

        <script src="https://ontimizeweb.github.io/docs/assets/js/lunr.js"></script>
<script type="text/javascript" src="/docs/assets/js/ontimize.js"></script>

<div class="search">
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ontimize Web" aria-label="Search Ontimize Web"
      autocomplete="off">
    <label for="search-input" class="search-label">
      <i class="fa fa-fw fa-search search-icon" aria-hidden="true"></i>
    </label>
  </div>
  <div id="search-results" class="search-results"></div>
</div>



<div class="search-overlay"></div>



        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <!--<li class="masthead__menu-item masthead__menu-item--lg"><a href="https://ontimizeweb.github.io/docs/">Ontimize Web</a></li>-->
          
            



            
              <li class="masthead__menu-item"><a href="https://ontimizeweb.github.io/docs/doc-overview/">Getting started</a>
            
            </li>


            
              <div class="masthead__menu-separator"></div>
            

          
            



            
              <li class="masthead__menu-item"><a href="https://ontimizeweb.github.io/docs/components/">Components</a>
            
            </li>


            
              <div class="masthead__menu-separator"></div>
            

          
            



            
              <li class="masthead__menu-item"><a href="https://ontimizeweb.github.io/docs/about/">About</a>
            
            </li>


            
            

          

          
          <li class="masthead__menu-item masthead__menu-item-active">
            <select onchange="window.location = this.options[this.selectedIndex].value">
            
              <option value="https://ontimizeweb.github.io/docs/v3" >3.x.x</option>
            
              <option value="https://ontimizeweb.github.io/docs/v4" >4.x.x</option>
            
              <option value="https://ontimizeweb.github.io/docs"  selected="selected" >8.x.x</option>
            
            </select>
          </li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  
  
    
      
      
      
    
    
      


 <script type="text/javascript" style="display:none;">
  var onNavigationItemClick = function (element) {

    var parentNav = $(element).parents('nav.nav__list');
    var icons = parentNav.find('svg');
    icons.addClass('fa-folder');
    icons.addClass('orange-icon');
    icons.removeClass('fa-folder-open');

    var parentLi = $(element).parents('li.nav-component-category:first');
    parentLi.siblings().removeClass('active-component-category');
    parentLi.addClass('active-component-category');
/*
    parentLi.siblings(':not(.active-parent)').removeClass('active-component-category');
    parentLi.toggleClass('active-component-category');
*/    
    var currentIcon = parentLi.find('svg:first');
    currentIcon.addClass('fa-folder-open');
    currentIcon.removeClass('orange-icon');
    currentIcon.removeClass('fa-folder');

  };
</script>

<nav class="nav__list">
  
  <ul>
    
    
    
      
          
              
                  
              
                  
              
                  
              
                  
              
                  
              
                 
      
          
              
                  
              
                  
              
                  
              
                  
              
                  
              
                  
                      
                      
                 
      
                 
      
                 
      
                 
      
    
 
    

    

    
    

      
       
      <li class="nav-component-category ">
        
          
            <span class="nav__sub-title"  onclick="onNavigationItemClick(this)"><i class="far fa-folder orange-icon nav__sub-title-icon"></i>Getting Started</span>
          

        

        
        <ul class="category-components-list">
          

          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/doc-overview/" class=" ">Document overview</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/example-overview/" class=" ">Example overview</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/install-and-run/" class=" ">Run an example</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/make-changes/" class=" ">Make some changes</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/advanced-changes/" class=" ">Advanced topics</a></li>
          
        </ul>
        
      </li>
    
    

      
       
      <li class="nav-component-category active-component-category active-parent">
        
          
            <span class="nav__sub-title"  onclick="onNavigationItemClick(this)"><i class="far fa-folder-open nav__sub-title-icon"></i>Guide</span>
          

        

        
        <ul class="category-components-list">
          

          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/guide/appstructure/" class=" ">App structure</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/guide/appconfig/" class=" ">App configuration</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/app-modules/" class=" ">Modules</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/routing/" class=" ">Routing</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/forms/" class=" ">Forms</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/guide/service/" class="active ">Services</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/guide/permissions/" class=" ">Permissions</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/run-your-app/" class=" ">Run your app</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/deployment/" class=" ">Deploy your app</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/add-to-project/" class=" ">OntimizeWeb library</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/video-examples/" class=" ">Video examples</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/migrations/" class=" ">Migration guides</a></li>
          
        </ul>
        
      </li>
    
    

      
       
      <li class="nav-component-category ">
        
          
            <span class="nav__sub-title"  onclick="onNavigationItemClick(this)"><i class="far fa-folder orange-icon nav__sub-title-icon"></i>Customization</span>
          

        

        
        <ul class="category-components-list">
          

          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/customize/theming/" class=" ">Theming</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/customize/lite/" class=" ">Lite theme</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/customize/typography/" class=" ">Typography</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/customize/style-guide/" class=" ">Style guide</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/customize/icons/" class=" ">Icons</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/customize/tabs/" class=" ">Tabs</a></li>
          
        </ul>
        
      </li>
    
    

      
       
      <li class="nav-component-category ">
        
          
            <span class="nav__sub-title"  onclick="onNavigationItemClick(this)"><i class="far fa-folder orange-icon nav__sub-title-icon"></i>Add-ons</span>
          

        

        
        <ul class="category-components-list">
          

          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/ontimize-web-ngx-tools/" class=" ">Tools</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/theming/" class=" ">Theming</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/ontimize-web-ngx-datatable/" class=" ">DataTable <small>(deprecated)</small></a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/charts/" class=" ">Charts</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/map/" class=" ">Map</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/ontimize-web-ngx-dynamicform/" class=" ">Dynamicform</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/ontimize-web-ngx-dynamicform-builder/" class=" ">Dynamicform Builder</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/filemanager/" class=" ">File Manager</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/tree/" class=" ">Tree</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/gallery/" class=" ">Gallery <span class='menuitem-badge'>new<span></a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/ontimize-web-ngx-jee-seed/" class=" ">JEE app seed</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/ontimize-web-ngx-seed/" class=" ">App seed</a></li>
          
        </ul>
        
      </li>
    
    

      
       
      <li class="nav-component-category ">
        
          
            <span class="nav__sub-title"  onclick="onNavigationItemClick(this)"><i class="far fa-folder orange-icon nav__sub-title-icon"></i>Meta</span>
          

        

        
        <ul class="category-components-list">
          

          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/faq/" class=" ">FAQ</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/contributing/" class=" ">Contributing</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/license/" class=" ">License</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/versions/" class=" ">Versions</a></li>
          
            
            

            
            

            <li><a href="https://ontimizeweb.github.io/docs/about/" class=" ">About</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page " itemscope itemtype="http://schema.org/CreativeWork">
    
    <meta itemprop="headline" content="Services">
    
    <meta itemprop="description" content="     On This Page  ">
    
    <meta itemprop="datePublished" content="February 26, 2021">
    

    <div class="page__inner-wrap">
      
      <header>
        <h1 class="page__title" itemprop="headline">Services
</h1>
        
      </header>
      

      <section class="page__content" itemprop="text">
        
<aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="far fa-file-alt"></i> On This Page</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#ontimize-services" id="markdown-toc-ontimize-services">Ontimize services</a>    <ul>
      <li><a href="#ontimize-services-methods" id="markdown-toc-ontimize-services-methods">Ontimize services methods</a></li>
      <li><a href="#crud-methods" id="markdown-toc-crud-methods">CRUD methods</a></li>
      <li><a href="#server-response-interface" id="markdown-toc-server-response-interface">Server response interface</a></li>
      <li><a href="#example-of-ontimize-service-in-a-component" id="markdown-toc-example-of-ontimize-service-in-a-component">Example of Ontimize Service in a component</a></li>
    </ul>
  </li>
  <li><a href="#extending-ontimize-web-services" id="markdown-toc-extending-ontimize-web-services">Extending Ontimize Web services</a>    <ul>
      <li><a href="#create-and-extended-a-service" id="markdown-toc-create-and-extended-a-service">Create and extended a service</a>        <ul>
          <li><a href="#use-your-service-in-the-whole-application" id="markdown-toc-use-your-service-in-the-whole-application">Use your service in the whole application</a></li>
          <li><a href="#use-your-service-in-a-specific-component" id="markdown-toc-use-your-service-in-a-specific-component">Use your service in a specific component</a></li>
        </ul>
      </li>
      <li><a href="#define-your-own-crud-methods" id="markdown-toc-define-your-own-crud-methods">Define your own CRUD methods</a></li>
      <li><a href="#define-your-own-successfulunsuccessful-request-callback-methods" id="markdown-toc-define-your-own-successfulunsuccessful-request-callback-methods">Define your own successful/unsuccessful request callback methods</a></li>
    </ul>
  </li>
  <li><a href="#example-of-custom-type-of-service" id="markdown-toc-example-of-custom-type-of-service">Example of custom type of service</a>    <ul>
      <li><a href="#create-the-service" id="markdown-toc-create-the-service">Create the service</a></li>
      <li><a href="#create-the-adapter-and-adapt-the-response" id="markdown-toc-create-the-adapter-and-adapt-the-response">Create the adapter and adapt the response</a></li>
      <li><a href="#type-of-the-response" id="markdown-toc-type-of-the-response">Type of the response</a></li>
    </ul>
  </li>
</ul>

  </nav>
</aside>

<p>This section describes the <strong>OntimizeWeb</strong> services an how to extend them to add or modify its functionality.</p>

<h2 id="ontimize-services">Ontimize services</h2>

<p>OntimizeWeb services are used for fetching and saving data from servers based on <a href="https://www.ontimize.com/" target="_blank">Ontimize</a>. There is two types of Ontimize services depending on the server technology used: <code class="language-plaintext highlighter-rouge">OntimizeService</code> and <code class="language-plaintext highlighter-rouge">OntimizeEEService</code>.</p>

<p>You can also use your own type of service and then we will explain how to parse and adapt the response.</p>

<p>You must indicate which one the application will use by configuring the <code class="language-plaintext highlighter-rouge">serviceType</code> attribute in the <a href="https://ontimizeweb.github.io/docs/guide/appconfig/#application-configuration" target="_blank">application configuration</a>.</p>

<h3 id="ontimize-services-methods">Ontimize services methods</h3>

<p>Both services <code class="language-plaintext highlighter-rouge">OntimizeService</code> and <code class="language-plaintext highlighter-rouge">OntimizeEEService</code> have the same methods for configuring and sending request to the server. This methods are the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Configuration methods */</span>
<span class="nx">getDefaultServiceConfiguration</span><span class="p">(</span><span class="nx">serviceName</span><span class="p">?:</span> <span class="nx">string</span><span class="p">):</span> <span class="nb">Object</span><span class="p">;</span>
<span class="nx">configureService</span><span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">any</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>

<span class="cm">/* CRUD methods */</span>
<span class="nx">query</span><span class="p">(</span><span class="nx">kv</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">av</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>
<span class="nx">advancedQuery</span><span class="p">(</span><span class="nx">kv</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">av</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nx">object</span><span class="p">,</span>
    <span class="nx">offset</span><span class="p">?:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">pagesize</span><span class="p">?:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">orderby</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">object</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">ServiceResponse</span><span class="o">&gt;</span>
<span class="nx">insert</span><span class="p">(</span><span class="nx">av</span><span class="p">:</span> <span class="nb">Object</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">entity</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nx">object</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">ServiceResponse</span><span class="o">&gt;</span>
<span class="nx">update</span><span class="p">(</span><span class="nx">kv</span><span class="p">:</span> <span class="nb">Object</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">av</span><span class="p">:</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nx">object</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">ServiceResponse</span><span class="o">&gt;</span>
<span class="k">delete</span><span class="p">(</span><span class="nx">kv</span><span class="p">:</span> <span class="nb">Object</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">ServiceResponse</span><span class="o">&gt;</span>

<span class="cm">/**
* Successful response parsers, there is one parser for each CRUD method which calls to the common parser.
* User can overwrite the chosen methods parsers or the common parser
*/</span>
<span class="kr">protected</span> <span class="nx">parseSuccessfulResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseSuccessfulQueryResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseSuccessfulAdvancedQueryResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseSuccessfulInsertResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseSuccessfulUpdateResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseSuccessfulDeleteResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>

<span class="cm">/**
* Unsuccessful response parsers, there is one parser for each CRUD method which calls to the common parser.
* User can overwrite the chosen methods parsers or the common parser
*/</span>
<span class="kr">protected</span> <span class="nx">parseUnsuccessfulResponse</span><span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseUnsuccessfulQueryResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseUnsuccessfulAdvancedQueryResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseUnsuccessfulInsertResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseUnsuccessfulUpdateResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>
<span class="kr">protected</span> <span class="nx">parseUnsuccessfulDeleteResponse</span><span class="p">(</span><span class="nx">resp</span><span class="p">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">);</span>

<span class="cm">/* Authentication methods */</span>
<span class="nx">startsession</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">password</span><span class="p">:</span> <span class="nx">string</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>
<span class="nx">endsession</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sessionId</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>
<span class="nx">redirectLogin</span><span class="p">?(</span><span class="nx">sessionExpired</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="crud-methods">CRUD methods</h3>
<p>The <em>CRUD</em> (Create, Read, Update and Delete) methods are used to perform standard Ontimize operations:</p>

<ul>
  <li><strong>query</strong>: performs a request to get data from the server.
    <ul>
      <li><strong>kv</strong>: indicates the filtering values. An empty object means that no filter will be applied into the request.</li>
      <li><strong>av</strong>: indicates the columns that you want to request.</li>
      <li><strong>entity</strong>: indicates the entity to perform the request.</li>
      <li><strong>sqltypes</strong>: object with the data types for each colum that participates in the request according to Java standard (see <a href="https://github.com/OntimizeWeb/ontimize-web-ngx/blob/master/projects/ontimize-web-ngx/src/lib/util/sqltypes.ts" target="_blank">SQLType</a>).</li>
    </ul>
  </li>
  <li><strong>advancedQuery</strong>: performs a request to get <strong>paginated</strong> data from the server.
    <ul>
      <li><strong>kv</strong>: indicates the filtering values. An empty object means that no filter will be applied into the request.</li>
      <li><strong>av</strong>: indicates the columns that you want to request.</li>
      <li><strong>entity</strong>: indicates the entity to perform the request.</li>
      <li><strong>sqltypes</strong>: object with the data types for each colum that participates in the request according to Java standard (see <a href="https://github.com/OntimizeWeb/ontimize-web-ngx/blob/master/projects/ontimize-web-ngx/src/lib/util/sqltypes.ts" target="_blank">SQLType</a>).</li>
      <li><strong>offset</strong>: the index of the first item requested in the collection.</li>
      <li><strong>pagesize</strong>: the number of items requested.</li>
      <li><strong>orderby</strong>: object with the sorting that will be applied to the request result.</li>
    </ul>
  </li>
  <li><strong>insert</strong>: performs a insert operation request to the server.
    <ul>
      <li><strong>av</strong>: indicates the values to insert.</li>
      <li><strong>entity</strong>: indicates the entity to perform the request.</li>
      <li><strong>sqltypes</strong>: object with the data types for each colum that participates in the request according to Java standard (see <a href="https://github.com/OntimizeWeb/ontimize-web-ngx/blob/master/projects/ontimize-web-ngx/src/lib/util/sqltypes.ts" target="_blank">SQLType</a>).</li>
    </ul>
  </li>
  <li><strong>update</strong>: performs an update operation request to the server.
    <ul>
      <li><strong>kv</strong>: indicates the filtering values for performing the update.</li>
      <li><strong>av</strong>: indicates the values to update.</li>
      <li><strong>entity</strong>: indicates the entity to perform the request.</li>
      <li><strong>sqltypes</strong>: object with the data types for each colum that participates in the request according to Java standard (see <a href="https://github.com/OntimizeWeb/ontimize-web-ngx/blob/master/projects/ontimize-web-ngx/src/lib/util/sqltypes.ts" target="_blank">SQLType</a>).</li>
    </ul>
  </li>
  <li><strong>delete</strong>: performs an delete operation request to the server.
    <ul>
      <li><strong>kv</strong>: indicates the filtering values for performing the deletion.</li>
      <li><strong>entity</strong>: indicates the entity to perform the request.</li>
      <li><strong>sqltypes</strong>: object with the data types for each colum that participates in the request according to Java standard (see <a href="https://github.com/OntimizeWeb/ontimize-web-ngx/blob/master/projects/ontimize-web-ngx/src/lib/util/sqltypes.ts" target="_blank">SQLType</a>).</li>
    </ul>
  </li>
</ul>

<h3 id="server-response-interface">Server response interface</h3>
<p>The standard response of the requests made to Ontimize based servers always follows the following structure:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">code</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nl">data</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nb">Object</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="nl">message</span><span class="p">:</span> <span class="dl">''</span><span class="p">;</span>
    <span class="nx">sqlTypes</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">;</span>
    <span class="nx">startRecordIndex</span><span class="p">?:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nx">totalQueryRecordsNumber</span><span class="p">?:</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Where the attributes indicates the following:</p>

<ul>
  <li><strong>code</strong>: indicates the result of the operation: 0 for successful operations, 1 for unsuccessful operations, 3 for session expired.</li>
  <li><strong>data</strong>: the data requested.</li>
  <li><strong>message</strong>: a message in case the response was not successful.</li>
  <li><strong>sqlTypes</strong>: indicates the data type according to Java standard. See <a href="https://docs.oracle.com/javase/8/docs/api/java/sql/Types.html" target="_blank">SQL Types</a>.</li>
  <li><strong>startRecordIndex</strong>: in paginated queries, indicates the position of the first retrieved record in the collection.</li>
  <li><strong>totalQueryRecordsNumber</strong>: in paginated queries, indicates the total number of record of the collection.</li>
</ul>

<p>You can see an example of a Ontimize service request response in the image below. You can see the complete response <a href="https://ontimizeweb.github.io/docs/assets/examples/ontimize_service_request_example_response.json" target="_blank">here</a>.</p>

<p><img src="https://ontimizeweb.github.io/docs/images/request.png" alt="Ontimize service response example" class="align-center" /></p>

<h3 id="example-of-ontimize-service-in-a-component">Example of Ontimize Service in a component</h3>

<p>Below we will show an example of how to configure and use an <code class="language-plaintext highlighter-rouge">Ontimize service</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">protected</span> <span class="nx">service</span><span class="p">:</span> <span class="nx">OntimizeService</span><span class="p">;</span>

<span class="kd">constructor</span><span class="p">(</span><span class="kr">protected</span> <span class="nx">injector</span><span class="p">:</span> <span class="nx">Injector</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">service</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">injector</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">OntimizeService</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">configureService</span><span class="p">();</span>
<span class="p">}</span>

<span class="kr">protected</span> <span class="nx">configureService</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">conf</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">getDefaultServiceConfiguration</span><span class="p">();</span>
  <span class="nx">conf</span><span class="p">[</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/movements</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">configureService</span><span class="p">(</span><span class="nx">conf</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">getMovements</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="dl">'</span><span class="s1">ACCOUNTID</span><span class="dl">'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">service</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">filter</span> <span class="o">=</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">ACCOUNTID</span><span class="dl">'</span><span class="p">:</span> <span class="nx">data</span><span class="p">[</span><span class="dl">'</span><span class="s1">ACCOUNTID</span><span class="dl">'</span><span class="p">]</span>
    <span class="p">};</span>
    <span class="kd">const</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">yAxis</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">xAxis</span><span class="p">,</span> <span class="dl">'</span><span class="s1">DATE_</span><span class="dl">'</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">filter</span><span class="p">,</span> <span class="nx">columns</span><span class="p">,</span> <span class="dl">'</span><span class="s1">movement</span><span class="dl">'</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">((</span><span class="nx">resp</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">adaptResult</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Impossible to query data!</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">adaptResult</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="p">...</span>
  <span class="p">}</span>
</code></pre></div></div>

<h2 id="extending-ontimize-web-services">Extending Ontimize Web services</h2>

<p>You can override or extend the functionality of the services defined in <strong>OntimizeWeb</strong>. You should know that some services are used internally and they cannot be extended. The prepared-to-extend services are the following:</p>

<table>
  <thead>
    <tr>
      <th>Service</th>
      <th>Injection token</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OntimizeService</code> and <code class="language-plaintext highlighter-rouge">OntimizeEEService</code></td>
      <td><code class="language-plaintext highlighter-rouge">O_DATA_SERVICE</code></td>
      <td>Service used for making CRUD operation and authentication</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OTranslateService</code></td>
      <td><code class="language-plaintext highlighter-rouge">O_TRANSLATE_SERVICE</code></td>
      <td>Service for translating the information shown in the application</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OntimizeFileService</code></td>
      <td><code class="language-plaintext highlighter-rouge">O_FILE_SERVICE</code></td>
      <td>Service for uploading files, used by the <a href="https://ontimizeweb.github.io/docs/components/input/file/overview/" target="_blank"><code class="language-plaintext highlighter-rouge">o-file-input</code></a>  component</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OntimizeExportService</code></td>
      <td><code class="language-plaintext highlighter-rouge">O_EXPORT_SERVICE</code></td>
      <td>Service used by the <a href="https://ontimizeweb.github.io/docs/components/input/file/overview/" target="_blank"><code class="language-plaintext highlighter-rouge">o-table</code></a> component for exporting its data</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OntimizePermissionsService</code> and <code class="language-plaintext highlighter-rouge">OntimizeEEPermissionsService</code></td>
      <td><code class="language-plaintext highlighter-rouge">O_PERMISSION_SERVICE</code></td>
      <td>Service used for loading the application permissions</td>
    </tr>
  </tbody>
</table>

<p>For extending a service you should create your own service that extends a service from <strong>OntimizeWeb</strong> and provide it in your application using the corresponding injection token from the table above.</p>

<h3 id="create-and-extended-a-service">Create and extended a service</h3>

<p>Create a new service class that extends a service from <strong>OntimizeWeb</strong>. In the following example we are creating a service called <code class="language-plaintext highlighter-rouge">StarsWarsService</code> that extends the <code class="language-plaintext highlighter-rouge">OntimizeEEService</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span><span class="p">,</span> <span class="nx">Injector</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">OntimizeEEService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ontimize-web-ngx</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">StarsWarsService</span> <span class="kd">extends</span> <span class="nx">OntimizeEEService</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">protected</span> <span class="nx">injector</span><span class="p">:</span> <span class="nx">Injector</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">injector</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>Once your service is created you must decide if it will be used <a href="#use-your-service-in-the-whole-application">in the whole application</a> or only in <a href="#use-your-service-in-a-specific-component">specific components</a>.</p>

<h4 id="use-your-service-in-the-whole-application">Use your service in the whole application</h4>

<p>In case you want to use your service in the whole application, you have to provide it in you application module using the corresponding injection token.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="p">{</span> <span class="na">provide</span><span class="p">:</span> <span class="nx">O_DATA_SERVICE</span><span class="p">,</span> <span class="na">useValue</span><span class="p">:</span> <span class="nx">StarsWarsService</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>NOTE:</strong> <code class="language-plaintext highlighter-rouge">OntimizeService</code>, <code class="language-plaintext highlighter-rouge">OntimizeEEService</code>, <code class="language-plaintext highlighter-rouge">OntimizeExportService</code>, <code class="language-plaintext highlighter-rouge">OntimizePermissionsService</code> and <code class="language-plaintext highlighter-rouge">OntimizeEEPermissionsService</code> can be extended and used in the whole application by indicating the class in the <a href="https://ontimizeweb.github.io/docs/guide/appconfig/#application-configuration" target="_blank">application configuration</a>. There is one attribute for each type of service.</p>
</blockquote>

<p>Now you can add or override the methods of the service as you need. The following example shows the new service consuming the <a href="https://swapi.co/" target="_blank">Stars Wars API</a> for querying different entities. We have override the <code class="language-plaintext highlighter-rouge">query</code> and the <code class="language-plaintext highlighter-rouge">advancedQuery</code> methods for making simple and paginated request to the API. Note that we must adapt the API response to the ontimize service response for using the retrieved data with the <strong>OntimizeWeb</strong> components.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span><span class="p">,</span> <span class="nx">Injector</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">OntimizeEEService</span><span class="p">,</span> <span class="nx">Observable</span><span class="p">,</span> <span class="nx">Util</span><span class="p">,</span> <span class="nx">ServiceResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ontimize-web-ngx</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">}</span>  <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">share</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs/operators</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">StarsWarsService</span> <span class="kd">extends</span> <span class="nx">OntimizeEEService</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">protected</span> <span class="nx">injector</span><span class="p">:</span> <span class="nx">Injector</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">injector</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kr">public</span> <span class="nx">query</span><span class="p">(</span><span class="nx">kv</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">av</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">ServiceResponse</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://swapi.co/api/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">entity</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/?format=json</span><span class="dl">'</span><span class="p">;</span>

    <span class="kd">let</span> <span class="na">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">dataObservable</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">(</span><span class="nx">observer</span> <span class="o">=&gt;</span> <span class="nx">_innerObserver</span> <span class="o">=</span> <span class="nx">observer</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">share</span><span class="p">());</span>

    <span class="kd">const</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">httpClient</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">resp</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="c1">// Prepare response for ontimize components</span>
      <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">code</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="nx">resp</span><span class="p">[</span><span class="dl">'</span><span class="s1">results</span><span class="dl">'</span><span class="p">],</span>
        <span class="na">message</span><span class="p">:</span> <span class="dl">''</span>
      <span class="p">};</span>
      <span class="nx">_innerObserver</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">self</span><span class="p">.</span><span class="nx">parseUnsuccessfulQueryResponse</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">_innerObserver</span><span class="p">.</span><span class="nx">complete</span><span class="p">());</span>
    <span class="k">return</span> <span class="nx">dataObservable</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">share</span><span class="p">());</span>
  <span class="p">}</span>

<span class="kr">public</span> <span class="nx">advancedQuery</span><span class="p">(</span><span class="nx">kv</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">av</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">offset</span><span class="p">?:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">pagesize</span><span class="p">?:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">orderby</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nb">Object</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">ServiceResponse</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="nx">offset</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Util</span><span class="p">.</span><span class="nx">isDefined</span><span class="p">(</span><span class="nx">offset</span><span class="p">))</span> <span class="p">?</span> <span class="nx">offset</span> <span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>

    <span class="c1">// Calculate page</span>
    <span class="kd">let</span> <span class="nx">page</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">Util</span><span class="p">.</span><span class="nx">isDefined</span><span class="p">(</span><span class="nx">offset</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">page</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">trunc</span><span class="p">(</span><span class="nx">offset</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://swapi.co/api/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">entity</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/?format=json</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&amp;page=</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">page</span><span class="p">;</span>

    <span class="kd">let</span> <span class="na">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">dataObservable</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">(</span><span class="nx">observer</span> <span class="o">=&gt;</span> <span class="nx">_innerObserver</span> <span class="o">=</span> <span class="nx">observer</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">httpClient</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">resp</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Prepare response for ontimize components</span>
      <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">code</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="nx">resp</span><span class="p">[</span><span class="dl">'</span><span class="s1">results</span><span class="dl">'</span><span class="p">],</span>
        <span class="na">message</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
        <span class="na">startRecordIndex</span><span class="p">:</span> <span class="nx">Util</span><span class="p">.</span><span class="nx">isDefined</span><span class="p">(</span><span class="nx">resp</span><span class="p">[</span><span class="dl">'</span><span class="s1">previous</span><span class="dl">'</span><span class="p">])</span> <span class="p">?</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="p">(</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">totalQueryRecordsNumber</span><span class="p">:</span> <span class="nx">resp</span><span class="p">[</span><span class="dl">'</span><span class="s1">count</span><span class="dl">'</span><span class="p">]</span>
      <span class="p">};</span>
      <span class="nx">_innerObserver</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">self</span><span class="p">.</span><span class="nx">parseUnsuccessfulQueryResponse</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">_innerObserver</span><span class="p">.</span><span class="nx">complete</span><span class="p">());</span>
    <span class="k">return</span> <span class="nx">dataObservable</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">share</span><span class="p">());</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>The following example shows a <a href="https://ontimizeweb.github.io/docs/components/table/overview/" target="_blank"><code class="language-plaintext highlighter-rouge">o-table</code></a> component configured for retrieving <em>starships</em> using the new service.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;o-table</span> <span class="na">attr=</span><span class="s">"starships"</span> <span class="na">entity=</span><span class="s">"starships"</span> <span class="na">columns=</span><span class="s">"name;model;manufacturer;starship_class;crew;passengers"</span>
  <span class="na">visible-columns=</span><span class="s">"name;model;manufacturer;starship_class;passengers"</span> <span class="na">pageable=</span><span class="s">"yes"</span> <span class="na">quick-filter=</span><span class="s">"no"</span> <span class="na">insert-button=</span><span class="s">"no"</span> <span class="na">fxFlex</span><span class="nt">&gt;</span>

  ...

<span class="nt">&lt;/o-table&gt;</span>
</code></pre></div></div>

<h4 id="use-your-service-in-a-specific-component">Use your service in a specific component</h4>

<p>If you want to use your service in a specific component instead of using it in the whole application, you have to create a factory method that returns a new instance of your service and add a provider to your module indicating the factory method like in the example below.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">StarsWarsService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../shared/stars-wars.service</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">starsWarsServiceFactory</span><span class="p">(</span><span class="nx">injector</span><span class="p">:</span> <span class="nx">Injector</span><span class="p">):</span> <span class="nx">StarsWarsService</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">StarsWarsService</span><span class="p">(</span><span class="nx">injector</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>

  <span class="p">...</span>

  <span class="na">providers</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">provide</span><span class="p">:</span> <span class="dl">'</span><span class="s1">starsWars</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">useFactory</span><span class="p">:</span> <span class="nx">starsWarsServiceFactory</span><span class="p">,</span>
    <span class="na">deps</span><span class="p">:</span> <span class="p">[</span><span class="nx">Injector</span><span class="p">]</span>
  <span class="p">}]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">MyModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<p>Once the service is included in the providers of your module, an instance of it will be available in the module, so you can configure the components for using it. For this, configure the <code class="language-plaintext highlighter-rouge">service-type</code> attribute in the component with the value of the <code class="language-plaintext highlighter-rouge">provide</code> attribute indicated in the previous step. Check the example below.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;o-table</span> <span class="na">attr=</span><span class="s">"starships"</span> <span class="na">entity=</span><span class="s">"starships"</span> <span class="na">columns=</span><span class="s">"name;model;manufacturer;starship_class;crew;passengers"</span>
  <span class="na">visible-columns=</span><span class="s">"name;model;manufacturer;starship_class;passengers"</span>  <span class="na">pageable=</span><span class="s">"yes"</span> <span class="na">quick-filter=</span><span class="s">"no"</span> <span class="na">insert-button=</span><span class="s">"no"</span> <span class="na">fxFlex</span>
  <span class="na">service-type=</span><span class="s">"starsWars"</span><span class="nt">&gt;</span>

  ...

<span class="nt">&lt;/o-table&gt;</span>
</code></pre></div></div>

<h3 id="define-your-own-crud-methods">Define your own CRUD methods</h3>

<p>All the <strong>OntimizeWeb</strong> components that use services for retrieving data have the attributes <code class="language-plaintext highlighter-rouge">query-method</code>, <code class="language-plaintext highlighter-rouge">paginated-query-method</code>, <code class="language-plaintext highlighter-rouge">insert-method</code>, <code class="language-plaintext highlighter-rouge">update-method</code> and <code class="language-plaintext highlighter-rouge">deleted-method</code>. The purpose of these attributes is allowing the component to use your own CRUD methods defined in your service. With this you can define, for example, as many <em>query</em> methods as you want.</p>

<p>In the example below we have defined the <code class="language-plaintext highlighter-rouge">getSkywalker</code> method that retrieves information from the API.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span><span class="p">,</span> <span class="nx">Injector</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">OntimizeEEService</span><span class="p">,</span> <span class="nx">Observable</span><span class="p">,</span> <span class="nx">Util</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ontimize-web-ngx</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">StarsWarsService</span> <span class="kd">extends</span> <span class="nx">OntimizeEEService</span> <span class="p">{</span>

  <span class="p">...</span>

  <span class="kr">public</span> <span class="nx">getSkywalker</span><span class="p">():</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://swapi.co/api/people/1/</span><span class="dl">'</span><span class="p">;</span>

    <span class="kd">let</span> <span class="na">_innerObserver</span><span class="p">:</span> <span class="nx">any</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">dataObservable</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">(</span><span class="nx">observer</span> <span class="o">=&gt;</span> <span class="nx">_innerObserver</span> <span class="o">=</span> <span class="nx">observer</span><span class="p">).</span><span class="nx">share</span><span class="p">();</span>

    <span class="kd">const</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">httpClient</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">resp</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Prepare response for ontimize components</span>
      <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">code</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="nx">resp</span><span class="p">,</span>
        <span class="na">message</span><span class="p">:</span> <span class="dl">''</span>
      <span class="p">};</span>
      <span class="nx">_innerObserver</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">self</span><span class="p">.</span><span class="nx">parseUnsuccessfulQueryResponse</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">_innerObserver</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">_innerObserver</span><span class="p">.</span><span class="nx">complete</span><span class="p">());</span>
    <span class="k">return</span> <span class="nx">dataObservable</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>Now you can configure the <code class="language-plaintext highlighter-rouge">query-method</code> attribute of your component to use the method defined previously.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;o-form</span> <span class="na">service-type=</span><span class="s">"starsWars"</span> <span class="na">query-method=</span><span class="s">"getSkywalker"</span> <span class="na">header-actions=</span><span class="s">"R"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;o-text-input</span> <span class="na">attr=</span><span class="s">"name"</span> <span class="na">read-only=</span><span class="s">"yes"</span><span class="nt">&gt;&lt;/o-text-input&gt;</span>
  <span class="nt">&lt;o-text-input</span> <span class="na">attr=</span><span class="s">"birth_year"</span> <span class="na">read-only=</span><span class="s">"yes"</span><span class="nt">&gt;&lt;/o-text-input&gt;</span>
  <span class="nt">&lt;o-text-input</span> <span class="na">attr=</span><span class="s">"gender"</span> <span class="na">read-only=</span><span class="s">"yes"</span><span class="nt">&gt;&lt;/o-text-input&gt;</span>
  <span class="nt">&lt;o-text-input</span> <span class="na">attr=</span><span class="s">"height"</span> <span class="na">read-only=</span><span class="s">"yes"</span><span class="nt">&gt;&lt;/o-text-input&gt;</span>
  <span class="nt">&lt;o-text-input</span> <span class="na">attr=</span><span class="s">"mass"</span> <span class="na">read-only=</span><span class="s">"yes"</span><span class="nt">&gt;&lt;/o-text-input&gt;</span>
<span class="nt">&lt;/o-form&gt;</span>
</code></pre></div></div>

<h3 id="define-your-own-successfulunsuccessful-request-callback-methods">Define your own successful/unsuccessful request callback methods</h3>

<p>Each <em>CRUD</em> method has it owns successful and unsuccessful request callbacks, called when the request ends. User can override or extends this methods to modify its behaviour. This methods are: <code class="language-plaintext highlighter-rouge">parseSuccessfulMETHODResponse</code> and <code class="language-plaintext highlighter-rouge">parseUnsuccessfulMETHODResponse</code> where <code class="language-plaintext highlighter-rouge">METHOD</code> is <code class="language-plaintext highlighter-rouge">query</code>, <code class="language-plaintext highlighter-rouge">advancedQuery</code>, <code class="language-plaintext highlighter-rouge">update</code>,<code class="language-plaintext highlighter-rouge">insert</code> or <code class="language-plaintext highlighter-rouge">delete</code>.</p>

<p>Both services <code class="language-plaintext highlighter-rouge">OntimizeService</code> and <code class="language-plaintext highlighter-rouge">OntimizeEEService</code> also have the generic succesful and unsuccessful request callback which are <code class="language-plaintext highlighter-rouge">parseSuccessfulResponse</code> and <code class="language-plaintext highlighter-rouge">parseUnsuccessfulResponse</code>. This callbacks are called from the previous explained <em>CRUD</em> method callbacks so user can chose whether to override a particular or the generic callback.</p>

<h2 id="example-of-custom-type-of-service">Example of custom type of service</h2>

<p>To create a new type of service and to adapt the response to Ontimize format we must follow the next steps.
First of all, you must indicate the name of the new type by configuring the <code class="language-plaintext highlighter-rouge">serviceType</code> attribute in the <a href="https://ontimizeweb.github.io/docs/guide/appconfig/#application-configuration" target="_blank">application configuration</a>.</p>

<h3 id="create-the-service">Create the service</h3>

<p>First of all, you must create an interface that matches the response of the API to type the <code class="language-plaintext highlighter-rouge">HttpResponse</code> as seen below.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpHeaders</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/common/http</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span><span class="p">,</span> <span class="nx">Injector</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">OntimizeBaseService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ontimize-web-ngx</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CustomResponseAdapter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./custom-service-response.adapter</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">CustomResponse</span> <span class="p">{</span>
  <span class="nx">data</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">meta</span><span class="p">?:</span> <span class="p">{</span>
    <span class="na">total_pages</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nl">current_page</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nl">next_page</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nl">per_page</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nl">total_count</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">abbreviation</span><span class="p">?:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">city</span><span class="p">?:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">full_name</span><span class="p">?:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">id</span><span class="p">?:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nx">name</span><span class="p">?:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Create a new service that extends <code class="language-plaintext highlighter-rouge">OntimizeBaseService</code>, in this case we will name the service type as <code class="language-plaintext highlighter-rouge">CustomService</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">CustomService</span> <span class="kd">extends</span> <span class="nx">OntimizeBaseService</span> <span class="p">{</span>

  <span class="kr">public</span> <span class="nx">configureAdapter</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">adapter</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">injector</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">CustomResponseAdapter</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kr">public</span> <span class="nx">configureService</span><span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">any</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">.</span><span class="nx">configureService</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_urlBase</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">urlBase</span> <span class="p">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">urlBase</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">https://your-api.com</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kr">protected</span> <span class="nx">buildHeaders</span><span class="p">():</span> <span class="nx">HttpHeaders</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">HttpHeaders</span><span class="p">({</span>
      <span class="dl">'</span><span class="s1">Access-Control-Allow-Origin</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json;charset=UTF-8</span><span class="dl">'</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="kr">public</span> <span class="nx">query</span><span class="p">(</span><span class="nx">kv</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">av</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_urlBase</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">entity</span> <span class="o">&amp;&amp;</span> <span class="nx">entity</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">detail</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">kv</span><span class="p">[</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">doRequest</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
      <span class="nx">url</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="kr">public</span> <span class="nx">advancedQuery</span><span class="p">(</span><span class="nx">kv</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">av</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">entity</span><span class="p">?:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">sqltypes</span><span class="p">?:</span> <span class="nb">Object</span><span class="p">,</span>
    <span class="nx">offset</span><span class="p">?:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">pagesize</span><span class="p">?:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">orderby</span><span class="p">?:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nb">Object</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_urlBase</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
    <span class="nx">url</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">?page=</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">;</span>
    <span class="nx">url</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">&amp;per_page=</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">pagesize</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">entity</span> <span class="o">&amp;&amp;</span> <span class="nx">entity</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">detail</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">kv</span><span class="p">[</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">doRequest</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
      <span class="nx">url</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="create-the-adapter-and-adapt-the-response">Create the adapter and adapt the response</h3>

<p>Now, you must adapt the response of the service to be the same as it is in OntimizeWeb. Here is where you have to use <code class="language-plaintext highlighter-rouge">CustomResponse</code> interface created in the first point.</p>

<p>The function adapt() will return <code class="language-plaintext highlighter-rouge">Custom Service Response</code> in OntimizeWeb readable format.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/common/http</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ServiceResponseAdapter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ontimize-web-ngx</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">CustomServiceResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./custom-service-response.class</span><span class="dl">'</span><span class="p">;</span> <span class="c1">//Explained on next section</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CustomResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./custom.service</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CustomServiceResponseAdapter</span> <span class="kr">implements</span> <span class="nx">ServiceResponseAdapter</span><span class="o">&lt;</span><span class="nx">CustomServiceResponse</span><span class="o">&gt;</span> <span class="p">{</span>

  <span class="nx">adapt</span><span class="p">(</span><span class="na">res</span><span class="p">:</span> <span class="nx">HttpResponse</span><span class="o">&lt;</span><span class="nx">CustomResponse</span><span class="o">&gt;</span><span class="p">):</span> <span class="nx">CustomServiceResponse</span> <span class="p">{</span>
    <span class="c1">// Adapt response to OntimizeWeb format.</span>
    <span class="kd">let</span> <span class="nx">code</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">let</span> <span class="nx">startRecordIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">totalQueryRecordsNumber</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">code</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">meta</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">meta</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">meta</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">meta</span><span class="p">.</span><span class="nx">total_count</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">totalQueryRecordsNumber</span> <span class="o">=</span> <span class="nx">meta</span><span class="p">.</span><span class="nx">total_count</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">meta</span><span class="p">.</span><span class="nx">current_page</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">startRecordIndex</span> <span class="o">=</span> <span class="nx">meta</span><span class="p">.</span><span class="nx">current_page</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">code</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Create new class element with the new data adapted.</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">CustomServiceResponse</span><span class="p">(</span>
      <span class="nx">code</span><span class="p">,</span>
      <span class="nx">data</span><span class="p">,</span>
      <span class="dl">''</span><span class="p">,</span>
      <span class="p">{},</span>
      <span class="nx">startRecordIndex</span><span class="p">,</span>
      <span class="nx">totalQueryRecordsNumber</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="type-of-the-response">Type of the response</h3>

<p>You can extend the behaviour of BaseServiceResponse.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BaseServiceResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ontimize-web-ngx</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">CustomServiceResponse</span> <span class="kd">extends</span> <span class="nx">BaseServiceResponse</span> <span class="p">{</span>

  <span class="p">...</span>

<span class="p">}</span>
</code></pre></div></div>

<p>You will have 3 functions in BaseServiceResponse that returns true or false to check the response. This functions are:</p>

<ul>
  <li>isSuccessful()</li>
  <li>isFailed()</li>
  <li>isUnauthorized()</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        




        
        <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-02-26T06:58:38-05:00">February 26, 2021</time></p>
        
      </footer>

      

      <!-- 


  <nav class="pagination">
    
      <a href="https://ontimizeweb.github.io/docs/forms/" class="pagination--pager" title="Forms
">
          <i class="fas fa-arrow-left margin-right"></i>
        Previous
      </a>
    
    
      <a href="https://ontimizeweb.github.io/docs/guide/permissions/" class="pagination--pager" title="Permissions
">
        Next
        <i class="fas fa-arrow-right margin-left"></i>
      </a>
    
  </nav>
 -->
    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<a href="#" class="scrollToTop"><i class="fa fa-fw fa-chevron-circle-up" aria-hidden="true"></i></a>

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/imatiainnova" target="_blank"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
      <li><a href="https://www.linkedin.com/company/224080?trk=prof-0-ovw-curr_pos" target="_blank"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
    
    
      <li><a href="http://github.com/OntimizeWeb" target="_blank"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://ontimizeweb.github.io/docs/feed.xml" target="_blank"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Imatia Innovation, S.L.. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://ontimizeweb.github.io/docs/assets/js/main.min.js"></script>





  </body>
</html>
